language: android
jdk: openjdk7
android:
  components:
    - tools
    - build-tools-23.0.2
    - android-19
    - extra-android-m2repository
    - extra-android-support
git:
  submodules: false
before_install:
  - chmod +x gradlew
  - gem install fir-cli
  - sed -i 's/git@github.com:/https:\/\/github.com\//' .gitmodules
  - git submodule init && git submodule update
script:
  -  ./gradlew clean build
before_deploy:
  mv app/build/outputs/apk/app-debug.apk app/build/outputs/apk/FileExplorer.apk
  skip_cleanup: true
  on:
    tags: true

after_deploy:
  - fir p app/build/outputs/apk/FileExplorer.apk -T $FIR_TOKEN -c "`git cat-file tag $TRAVIS_TAG`"